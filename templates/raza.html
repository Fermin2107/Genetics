{% extends "base.html" %}
{% block content %}
<h2>Animales de la raza: {{ raza.nombre }}</h2>
<form method="get" action="">
    <label for="rp">RP:</label>
    <input type="text" name="rp" id="rp" value="{{ request.args.get('rp', '') }}">

    <label for="nombre">Nombre:</label>
    <input type="text" name="nombre" id="nombre" value="{{ request.args.get('nombre', '') }}">

    <label for="padre">Padre:</label>
    <input type="text" name="padre" id="padre" value="{{ request.args.get('padre', '') }}">

    <label for="madre">Madre:</label>
    <input type="text" name="madre" id="madre" value="{{ request.args.get('madre', '') }}">

    <label for="sexo">Sexo:</label>
    <input type="text" name="sexo" id="sexo" value="{{ request.args.get('sexo', '') }}">

    <label for="fecha_nac_min">Fecha nac. (mín):</label>
    <input type="date" name="fecha_nac_min" id="fecha_nac_min" value="{{ request.args.get('fecha_nac_min', '') }}">
    <label for="fecha_nac_max">Fecha nac. (máx):</label>
    <input type="date" name="fecha_nac_max" id="fecha_nac_max" value="{{ request.args.get('fecha_nac_max', '') }}">

    <!-- FILTROS NUMÉRICOS -->
    <label for="pezuñas_min">Pezuñas (mín):</label>
    <input type="number" step="any" name="pezuñas_min" id="pezuñas_min" value="{{ request.args.get('pezuñas_min', '') }}">
    <label for="pezuñas_max">Pezuñas (máx):</label>
    <input type="number" step="any" name="pezuñas_max" id="pezuñas_max" value="{{ request.args.get('pezuñas_max', '') }}">

    <label for="articulacion_min">Articulación (mín):</label>
    <input type="number" step="any" name="articulacion_min" id="articulacion_min" value="{{ request.args.get('articulacion_min', '') }}">
    <label for="articulacion_max">Articulación (máx):</label>
    <input type="number" step="any" name="articulacion_max" id="articulacion_max" value="{{ request.args.get('articulacion_max', '') }}">

    <label for="clase_min">Clase (mín):</label>
    <input type="number" step="any" name="clase_min" id="clase_min" value="{{ request.args.get('clase_min', '') }}">
    <label for="clase_max">Clase (máx):</label>
    <input type="number" step="any" name="clase_max" id="clase_max" value="{{ request.args.get('clase_max', '') }}">

    <label for="orden">Orden RP:</label>
    <select name="orden" id="orden">
        <option value="asc" {% if orden == 'asc' %}selected{% endif %}>Ascendente</option>
        <option value="desc" {% if orden == 'desc' %}selected{% endif %}>Descendente</option>
    </select>

    <button type="submit">Filtrar</button>
</form>
<p>Total: {{ total }}</p>

<table>
    <thead>
        <tr>
            <th>RP</th>
            <th>Nombre</th>
            <th>Padre</th>
            <th>Madre</th>
            <th>Pezuñas</th>
            <th>Articulación</th>
            <th>Clase</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for animal in animales %}
        <tr>
            <td>{{ animal.rp }}</td>
            <td>{{ animal.nombre }}</td>
            <td>{{ animal.padre }}</td>
            <td>{{ animal.madre }}</td>
            <td>{{ animal.pezuñas }}</td>
            <td>{{ animal.articulacion }}</td>
            <td>{{ animal.clase }}</td>
            <td>
                <a href="{{ url_for('ficha_animal', id=animal.id) }}">Ver</a>
                <a href="{{ url_for('editar_animal', id=animal.id) }}">Editar</a>
                <form method="post" action="{{ url_for('eliminar_animal', id=animal.id) }}" style="display:inline;">
                    <button type="submit" onclick="return confirm('¿Seguro que quieres eliminar?')">Eliminar</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{{ url_for('registrar_animal', raza_id=raza.id) }}">Registrar nuevo animal</a>
{% endblock %}
